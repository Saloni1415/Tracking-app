{"version":3,"sources":["webpack:///node_modules/agm-overlays/__ivy_ngcc__/fesm2015/agm-overlays.js"],"names":["_c0","_c1","AgmOverlay","_mapsWrapper","_markerManager","visible","zIndex","markerClick","openInfoWindow","infoWindow","draggable","_observableSubscriptions","iWins","template","nativeElement","getElementsByTagName","x","length","parentNode","removeChild","load","then","onChanges","onChangesOverride","changes","subscribe","handleInfoWindowUpdate","latitude","longitude","overlayView","destroy","destroyed","promise","deleteMarker","div","remove","setMap","forEach","s","unsubscribe","Error","iWin","hostMarker","getNativeMap","map","overlay","getOverlay","addMarker","_addEventListeners","getNativeMarker","nativeMarker","call","google","maps","OverlayView","iconUrl","bounds","bounds_","LatLngBounds","LatLng","y","elm","children","restore","appendChild","getDiv","draw","panes","getPanes","overlayImage","latlng","proj","getProjection","point","fromLatLngToDivPixel","style","left","top","sw","getSouthWest","ne","getNorthEast","width","height","addEventListener","event","handleTap","stopPropagation","open","emit","eo","createEventObservable","cs","push","ɵfac","AgmOverlay_Factory","t","ɵcmp","type","selectors","contentQueries","AgmOverlay_ContentQueries","rf","ctx","dirIndex","_t","viewQuery","AgmOverlay_Query","first","inputs","outputs","features","ngContentSelectors","decls","vars","consts","AgmOverlay_Template","encapsulation","ctorParameters","prototype","read","AgmOverlays","ɵmod","ɵinj","factory","AgmOverlays_Factory","imports","args","selector","ngJitMode","declarations","exports"],"mappings":"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","file":"default~pages-ordertrack-ordertrack-module~pages-userloc-userloc-module-es5.js","sourcesContent":["import { __decorate } from 'tslib';\nimport { EventEmitter, QueryList, Input, Output, ContentChildren, ViewChild, ElementRef, Component, NgModule } from '@angular/core';\nimport { GoogleMapsAPIWrapper, MarkerManager, AgmInfoWindow } from '@agm/core';\nimport { CommonModule } from '@angular/common';\n\nimport * as ɵngcc0 from '@angular/core';\nimport * as ɵngcc1 from '@agm/core';\n\nconst _c0 = [\"content\"];\nconst _c1 = [\"*\"];\nlet AgmOverlay = class AgmOverlay {\n    constructor(_mapsWrapper, _markerManager //rename to fight the private declaration of parent\n    ) {\n        this._mapsWrapper = _mapsWrapper;\n        this._markerManager = _markerManager;\n        this.visible = true; //possibly doesn't work and just left over from agm-core marker replication\n        this.zIndex = 1;\n        //TIP: Do NOT use this... Just put (click) on your html overlay element\n        this.markerClick = new EventEmitter();\n        this.openInfoWindow = true;\n        this.infoWindow = new QueryList();\n        //TODO, implement this\n        this.draggable = false;\n        //elmGuts:any\n        this._observableSubscriptions = [];\n    }\n    ngAfterViewInit() {\n        //remove reference of info windows\n        const iWins = this.template.nativeElement.getElementsByTagName('agm-info-window');\n        for (let x = iWins.length - 1; x >= 0; --x) {\n            iWins[x].parentNode.removeChild(iWins[x]);\n        }\n        this.load().then(() => {\n            this.onChanges = this.onChangesOverride;\n        });\n    }\n    ngAfterContentInit() {\n        this.infoWindow.changes.subscribe(() => this.handleInfoWindowUpdate());\n    }\n    ngOnChanges(changes) {\n        this.onChanges(changes);\n    }\n    onChanges(changes) { }\n    onChangesOverride(changes) {\n        if (changes.latitude || changes.longitude || changes.zIndex) {\n            this.overlayView.latitude = this.latitude;\n            this.overlayView.longitude = this.longitude;\n            this.overlayView.zIndex = this.zIndex;\n            this.destroy().then(() => this.load());\n        }\n    }\n    ngOnDestroy() {\n        this.destroy();\n    }\n    destroy() {\n        this.destroyed = true;\n        const promise = this._markerManager.deleteMarker(this.overlayView);\n        if (this.overlayView) {\n            if (this.overlayView.div) {\n                this.overlayView.remove();\n            }\n            this.overlayView.setMap(null);\n        }\n        this._observableSubscriptions.forEach((s) => s.unsubscribe());\n        delete this.overlayView;\n        //delete this.elmGuts\n        return promise;\n    }\n    handleInfoWindowUpdate() {\n        if (this.infoWindow.length > 1) {\n            throw new Error('Expected no more than one info window.');\n        }\n        this.infoWindow.forEach(iWin => {\n            iWin.hostMarker = this.overlayView;\n        });\n    }\n    load() {\n        return this._mapsWrapper.getNativeMap()\n            .then(map => {\n            const overlay = this.getOverlay(map);\n            this._markerManager.addMarker(overlay);\n            this._addEventListeners();\n            return this._markerManager.getNativeMarker(overlay);\n        })\n            .then(nativeMarker => {\n            const setMap = nativeMarker.setMap;\n            if (nativeMarker['map']) {\n                this.overlayView.setMap(nativeMarker['map']);\n            }\n            nativeMarker.setMap = (map) => {\n                setMap.call(nativeMarker, map);\n                if (this.overlayView) {\n                    this.overlayView.setMap(map);\n                }\n            };\n        });\n    }\n    getOverlay(map) {\n        this.overlayView = this.overlayView || new google.maps.OverlayView();\n        /* make into foo marker that AGM likes */\n        this.overlayView.iconUrl = \" \";\n        this.overlayView.latitude = this.latitude;\n        this.overlayView.longitude = this.longitude;\n        this.overlayView.visible = false; //hide 40x40 transparent placeholder that prevents hover events\n        /* end */\n        if (this.bounds) {\n            this.overlayView.bounds_ = new google.maps.LatLngBounds(new google.maps.LatLng(this.latitude + this.bounds.x.latitude, this.longitude + this.bounds.x.longitude), new google.maps.LatLng(this.latitude + this.bounds.y.latitude, this.longitude + this.bounds.y.longitude));\n        }\n        // js-marker-clusterer does not support updating positions. We are forced to delete/add and compensate for .removeChild calls\n        const elm = this.template.nativeElement.children[0];\n        //const elm =  this.elmGuts || this.template.nativeElement.children[0]\n        //we must always be sure to steal our stolen element back incase we are just in middle of changes and will redraw\n        const restore = (div) => {\n            this.template.nativeElement.appendChild(div);\n        };\n        this.overlayView.remove = function () {\n            if (!this.div)\n                return;\n            this.div.parentNode.removeChild(this.div);\n            restore(this.div);\n            delete this.div;\n        };\n        this.overlayView.getDiv = function () {\n            return this.div;\n        };\n        this.overlayView.draw = function () {\n            if (!this.div) {\n                this.div = elm;\n                const panes = this.getPanes();\n                // if no panes then assumed not on map\n                if (!panes || !panes.overlayImage)\n                    return;\n                panes.overlayImage.appendChild(elm);\n            }\n            const latlng = new google.maps.LatLng(this.latitude, this.longitude);\n            const proj = this.getProjection();\n            if (!proj)\n                return;\n            const point = proj.fromLatLngToDivPixel(latlng);\n            if (point) {\n                elm.style.left = (point.x - 10) + 'px';\n                elm.style.top = (point.y - 20) + 'px';\n            }\n            if (this.bounds_) {\n                // stretch content between two points leftbottom and righttop and resize\n                const proj = this.getProjection();\n                const sw = proj.fromLatLngToDivPixel(this.bounds_.getSouthWest());\n                const ne = proj.fromLatLngToDivPixel(this.bounds_.getNorthEast());\n                this.div.style.left = sw.x + 'px';\n                this.div.style.top = ne.y + 'px';\n                this.div.children[0].style.width = ne.x - sw.x + 'px';\n                this.div.children[0].style.height = sw.y - ne.y + 'px';\n            }\n        };\n        elm.addEventListener(\"click\", event => {\n            this.handleTap();\n            event.stopPropagation();\n        });\n        this.handleInfoWindowUpdate();\n        return this.overlayView;\n    }\n    handleTap() {\n        if (this.openInfoWindow) {\n            this.infoWindow.forEach(infoWindow => {\n                infoWindow.open();\n            });\n        }\n        this.markerClick.emit(null);\n    }\n    _addEventListeners() {\n        const eo = this._markerManager.createEventObservable('click', this.overlayView);\n        const cs = eo.subscribe(() => this.handleTap());\n        this._observableSubscriptions.push(cs);\n    }\n};\nAgmOverlay.ɵfac = function AgmOverlay_Factory(t) { return new (t || AgmOverlay)(ɵngcc0.ɵɵdirectiveInject(ɵngcc1.GoogleMapsAPIWrapper), ɵngcc0.ɵɵdirectiveInject(ɵngcc1.MarkerManager)); };\nAgmOverlay.ɵcmp = ɵngcc0.ɵɵdefineComponent({ type: AgmOverlay, selectors: [[\"agm-overlay\"]], contentQueries: function AgmOverlay_ContentQueries(rf, ctx, dirIndex) { if (rf & 1) {\n        ɵngcc0.ɵɵcontentQuery(dirIndex, AgmInfoWindow, false);\n    } if (rf & 2) {\n        var _t;\n        ɵngcc0.ɵɵqueryRefresh(_t = ɵngcc0.ɵɵloadQuery()) && (ctx.infoWindow = _t);\n    } }, viewQuery: function AgmOverlay_Query(rf, ctx) { if (rf & 1) {\n        ɵngcc0.ɵɵviewQuery(_c0, true, ElementRef);\n    } if (rf & 2) {\n        var _t;\n        ɵngcc0.ɵɵqueryRefresh(_t = ɵngcc0.ɵɵloadQuery()) && (ctx.template = _t.first);\n    } }, inputs: { visible: \"visible\", zIndex: \"zIndex\", openInfoWindow: \"openInfoWindow\", draggable: [\"markerDraggable\", \"draggable\"], latitude: \"latitude\", longitude: \"longitude\", bounds: \"bounds\" }, outputs: { markerClick: \"markerClick\" }, features: [ɵngcc0.ɵɵNgOnChangesFeature], ngContentSelectors: _c1, decls: 4, vars: 0, consts: [[\"content\", \"\"], [2, \"position\", \"absolute\"]], template: function AgmOverlay_Template(rf, ctx) { if (rf & 1) {\n        ɵngcc0.ɵɵprojectionDef();\n        ɵngcc0.ɵɵelementStart(0, \"div\", null, 0);\n        ɵngcc0.ɵɵelementStart(2, \"div\", 1);\n        ɵngcc0.ɵɵprojection(3);\n        ɵngcc0.ɵɵelementEnd();\n        ɵngcc0.ɵɵelementEnd();\n    } }, encapsulation: 2 });\nAgmOverlay.ctorParameters = () => [\n    { type: GoogleMapsAPIWrapper },\n    { type: MarkerManager //rename to fight the private declaration of parent\n     }\n];\n__decorate([\n    Input()\n], AgmOverlay.prototype, \"latitude\", void 0);\n__decorate([\n    Input()\n], AgmOverlay.prototype, \"longitude\", void 0);\n__decorate([\n    Input()\n], AgmOverlay.prototype, \"visible\", void 0);\n__decorate([\n    Input()\n], AgmOverlay.prototype, \"zIndex\", void 0);\n__decorate([\n    Input()\n], AgmOverlay.prototype, \"bounds\", void 0);\n__decorate([\n    Output()\n], AgmOverlay.prototype, \"markerClick\", void 0);\n__decorate([\n    Input()\n], AgmOverlay.prototype, \"openInfoWindow\", void 0);\n__decorate([\n    ContentChildren(AgmInfoWindow)\n], AgmOverlay.prototype, \"infoWindow\", void 0);\n__decorate([\n    Input('markerDraggable')\n], AgmOverlay.prototype, \"draggable\", void 0);\n__decorate([\n    ViewChild('content', { read: ElementRef })\n], AgmOverlay.prototype, \"template\", void 0);\n\nlet AgmOverlays = class AgmOverlays {\n};\nAgmOverlays.ɵmod = ɵngcc0.ɵɵdefineNgModule({ type: AgmOverlays });\nAgmOverlays.ɵinj = ɵngcc0.ɵɵdefineInjector({ factory: function AgmOverlays_Factory(t) { return new (t || AgmOverlays)(); }, imports: [[\n            CommonModule\n        ]] });\n/*@__PURE__*/ (function () { ɵngcc0.ɵsetClassMetadata(AgmOverlay, [{\n        type: Component,\n        args: [{\n                selector: \"agm-overlay\",\n                template: '<div #content><div style=\"position:absolute\"><ng-content></ng-content></div></div>'\n            }]\n    }], function () { return [{ type: ɵngcc1.GoogleMapsAPIWrapper }, { type: ɵngcc1.MarkerManager }]; }, { visible: [{\n            type: Input\n        }], zIndex: [{\n            type: Input\n        }], markerClick: [{\n            type: Output\n        }], openInfoWindow: [{\n            type: Input\n        }], infoWindow: [{\n            type: ContentChildren,\n            args: [AgmInfoWindow]\n        }], draggable: [{\n            type: Input,\n            args: ['markerDraggable']\n        }], latitude: [{\n            type: Input\n        }], longitude: [{\n            type: Input\n        }], bounds: [{\n            type: Input\n        }], template: [{\n            type: ViewChild,\n            args: ['content', { read: ElementRef }]\n        }] }); })();\n(function () { (typeof ngJitMode === \"undefined\" || ngJitMode) && ɵngcc0.ɵɵsetNgModuleScope(AgmOverlays, { declarations: function () { return [AgmOverlay]; }, imports: function () { return [CommonModule]; }, exports: function () { return [AgmOverlay]; } }); })();\n/*@__PURE__*/ (function () { ɵngcc0.ɵsetClassMetadata(AgmOverlays, [{\n        type: NgModule,\n        args: [{\n                imports: [\n                    CommonModule\n                ],\n                declarations: [AgmOverlay],\n                exports: [AgmOverlay]\n            }]\n    }], null, null); })();\n\n/**\n * Generated bundle index. Do not edit.\n */\n\nexport { AgmOverlay, AgmOverlays };\n\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiYWdtLW92ZXJsYXlzLmpzIiwic291cmNlcyI6WyJhZ20tb3ZlcmxheXMuanMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7Ozs7O0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7Ozs7Ozs7Ozs7Ozs7Ozs7OzZCQUFFO0FBQ0Y7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSw2Q0FNZTtBQUNmO0FBQ0E7QUFDQTs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OzBCQVNnQjtBQUNoQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IF9fZGVjb3JhdGUgfSBmcm9tICd0c2xpYic7XG5pbXBvcnQgeyBFdmVudEVtaXR0ZXIsIFF1ZXJ5TGlzdCwgSW5wdXQsIE91dHB1dCwgQ29udGVudENoaWxkcmVuLCBWaWV3Q2hpbGQsIEVsZW1lbnRSZWYsIENvbXBvbmVudCwgTmdNb2R1bGUgfSBmcm9tICdAYW5ndWxhci9jb3JlJztcbmltcG9ydCB7IEdvb2dsZU1hcHNBUElXcmFwcGVyLCBNYXJrZXJNYW5hZ2VyLCBBZ21JbmZvV2luZG93IH0gZnJvbSAnQGFnbS9jb3JlJztcbmltcG9ydCB7IENvbW1vbk1vZHVsZSB9IGZyb20gJ0Bhbmd1bGFyL2NvbW1vbic7XG5cbmxldCBBZ21PdmVybGF5ID0gY2xhc3MgQWdtT3ZlcmxheSB7XG4gICAgY29uc3RydWN0b3IoX21hcHNXcmFwcGVyLCBfbWFya2VyTWFuYWdlciAvL3JlbmFtZSB0byBmaWdodCB0aGUgcHJpdmF0ZSBkZWNsYXJhdGlvbiBvZiBwYXJlbnRcbiAgICApIHtcbiAgICAgICAgdGhpcy5fbWFwc1dyYXBwZXIgPSBfbWFwc1dyYXBwZXI7XG4gICAgICAgIHRoaXMuX21hcmtlck1hbmFnZXIgPSBfbWFya2VyTWFuYWdlcjtcbiAgICAgICAgdGhpcy52aXNpYmxlID0gdHJ1ZTsgLy9wb3NzaWJseSBkb2Vzbid0IHdvcmsgYW5kIGp1c3QgbGVmdCBvdmVyIGZyb20gYWdtLWNvcmUgbWFya2VyIHJlcGxpY2F0aW9uXG4gICAgICAgIHRoaXMuekluZGV4ID0gMTtcbiAgICAgICAgLy9USVA6IERvIE5PVCB1c2UgdGhpcy4uLiBKdXN0IHB1dCAoY2xpY2spIG9uIHlvdXIgaHRtbCBvdmVybGF5IGVsZW1lbnRcbiAgICAgICAgdGhpcy5tYXJrZXJDbGljayA9IG5ldyBFdmVudEVtaXR0ZXIoKTtcbiAgICAgICAgdGhpcy5vcGVuSW5mb1dpbmRvdyA9IHRydWU7XG4gICAgICAgIHRoaXMuaW5mb1dpbmRvdyA9IG5ldyBRdWVyeUxpc3QoKTtcbiAgICAgICAgLy9UT0RPLCBpbXBsZW1lbnQgdGhpc1xuICAgICAgICB0aGlzLmRyYWdnYWJsZSA9IGZhbHNlO1xuICAgICAgICAvL2VsbUd1dHM6YW55XG4gICAgICAgIHRoaXMuX29ic2VydmFibGVTdWJzY3JpcHRpb25zID0gW107XG4gICAgfVxuICAgIG5nQWZ0ZXJWaWV3SW5pdCgpIHtcbiAgICAgICAgLy9yZW1vdmUgcmVmZXJlbmNlIG9mIGluZm8gd2luZG93c1xuICAgICAgICBjb25zdCBpV2lucyA9IHRoaXMudGVtcGxhdGUubmF0aXZlRWxlbWVudC5nZXRFbGVtZW50c0J5VGFnTmFtZSgnYWdtLWluZm8td2luZG93Jyk7XG4gICAgICAgIGZvciAobGV0IHggPSBpV2lucy5sZW5ndGggLSAxOyB4ID49IDA7IC0teCkge1xuICAgICAgICAgICAgaVdpbnNbeF0ucGFyZW50Tm9kZS5yZW1vdmVDaGlsZChpV2luc1t4XSk7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5sb2FkKCkudGhlbigoKSA9PiB7XG4gICAgICAgICAgICB0aGlzLm9uQ2hhbmdlcyA9IHRoaXMub25DaGFuZ2VzT3ZlcnJpZGU7XG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBuZ0FmdGVyQ29udGVudEluaXQoKSB7XG4gICAgICAgIHRoaXMuaW5mb1dpbmRvdy5jaGFuZ2VzLnN1YnNjcmliZSgoKSA9PiB0aGlzLmhhbmRsZUluZm9XaW5kb3dVcGRhdGUoKSk7XG4gICAgfVxuICAgIG5nT25DaGFuZ2VzKGNoYW5nZXMpIHtcbiAgICAgICAgdGhpcy5vbkNoYW5nZXMoY2hhbmdlcyk7XG4gICAgfVxuICAgIG9uQ2hhbmdlcyhjaGFuZ2VzKSB7IH1cbiAgICBvbkNoYW5nZXNPdmVycmlkZShjaGFuZ2VzKSB7XG4gICAgICAgIGlmIChjaGFuZ2VzLmxhdGl0dWRlIHx8IGNoYW5nZXMubG9uZ2l0dWRlIHx8IGNoYW5nZXMuekluZGV4KSB7XG4gICAgICAgICAgICB0aGlzLm92ZXJsYXlWaWV3LmxhdGl0dWRlID0gdGhpcy5sYXRpdHVkZTtcbiAgICAgICAgICAgIHRoaXMub3ZlcmxheVZpZXcubG9uZ2l0dWRlID0gdGhpcy5sb25naXR1ZGU7XG4gICAgICAgICAgICB0aGlzLm92ZXJsYXlWaWV3LnpJbmRleCA9IHRoaXMuekluZGV4O1xuICAgICAgICAgICAgdGhpcy5kZXN0cm95KCkudGhlbigoKSA9PiB0aGlzLmxvYWQoKSk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgbmdPbkRlc3Ryb3koKSB7XG4gICAgICAgIHRoaXMuZGVzdHJveSgpO1xuICAgIH1cbiAgICBkZXN0cm95KCkge1xuICAgICAgICB0aGlzLmRlc3Ryb3llZCA9IHRydWU7XG4gICAgICAgIGNvbnN0IHByb21pc2UgPSB0aGlzLl9tYXJrZXJNYW5hZ2VyLmRlbGV0ZU1hcmtlcih0aGlzLm92ZXJsYXlWaWV3KTtcbiAgICAgICAgaWYgKHRoaXMub3ZlcmxheVZpZXcpIHtcbiAgICAgICAgICAgIGlmICh0aGlzLm92ZXJsYXlWaWV3LmRpdikge1xuICAgICAgICAgICAgICAgIHRoaXMub3ZlcmxheVZpZXcucmVtb3ZlKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLm92ZXJsYXlWaWV3LnNldE1hcChudWxsKTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLl9vYnNlcnZhYmxlU3Vic2NyaXB0aW9ucy5mb3JFYWNoKChzKSA9PiBzLnVuc3Vic2NyaWJlKCkpO1xuICAgICAgICBkZWxldGUgdGhpcy5vdmVybGF5VmlldztcbiAgICAgICAgLy9kZWxldGUgdGhpcy5lbG1HdXRzXG4gICAgICAgIHJldHVybiBwcm9taXNlO1xuICAgIH1cbiAgICBoYW5kbGVJbmZvV2luZG93VXBkYXRlKCkge1xuICAgICAgICBpZiAodGhpcy5pbmZvV2luZG93Lmxlbmd0aCA+IDEpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignRXhwZWN0ZWQgbm8gbW9yZSB0aGFuIG9uZSBpbmZvIHdpbmRvdy4nKTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLmluZm9XaW5kb3cuZm9yRWFjaChpV2luID0+IHtcbiAgICAgICAgICAgIGlXaW4uaG9zdE1hcmtlciA9IHRoaXMub3ZlcmxheVZpZXc7XG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBsb2FkKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5fbWFwc1dyYXBwZXIuZ2V0TmF0aXZlTWFwKClcbiAgICAgICAgICAgIC50aGVuKG1hcCA9PiB7XG4gICAgICAgICAgICBjb25zdCBvdmVybGF5ID0gdGhpcy5nZXRPdmVybGF5KG1hcCk7XG4gICAgICAgICAgICB0aGlzLl9tYXJrZXJNYW5hZ2VyLmFkZE1hcmtlcihvdmVybGF5KTtcbiAgICAgICAgICAgIHRoaXMuX2FkZEV2ZW50TGlzdGVuZXJzKCk7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5fbWFya2VyTWFuYWdlci5nZXROYXRpdmVNYXJrZXIob3ZlcmxheSk7XG4gICAgICAgIH0pXG4gICAgICAgICAgICAudGhlbihuYXRpdmVNYXJrZXIgPT4ge1xuICAgICAgICAgICAgY29uc3Qgc2V0TWFwID0gbmF0aXZlTWFya2VyLnNldE1hcDtcbiAgICAgICAgICAgIGlmIChuYXRpdmVNYXJrZXJbJ21hcCddKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5vdmVybGF5Vmlldy5zZXRNYXAobmF0aXZlTWFya2VyWydtYXAnXSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBuYXRpdmVNYXJrZXIuc2V0TWFwID0gKG1hcCkgPT4ge1xuICAgICAgICAgICAgICAgIHNldE1hcC5jYWxsKG5hdGl2ZU1hcmtlciwgbWFwKTtcbiAgICAgICAgICAgICAgICBpZiAodGhpcy5vdmVybGF5Vmlldykge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLm92ZXJsYXlWaWV3LnNldE1hcChtYXApO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH07XG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBnZXRPdmVybGF5KG1hcCkge1xuICAgICAgICB0aGlzLm92ZXJsYXlWaWV3ID0gdGhpcy5vdmVybGF5VmlldyB8fCBuZXcgZ29vZ2xlLm1hcHMuT3ZlcmxheVZpZXcoKTtcbiAgICAgICAgLyogbWFrZSBpbnRvIGZvbyBtYXJrZXIgdGhhdCBBR00gbGlrZXMgKi9cbiAgICAgICAgdGhpcy5vdmVybGF5Vmlldy5pY29uVXJsID0gXCIgXCI7XG4gICAgICAgIHRoaXMub3ZlcmxheVZpZXcubGF0aXR1ZGUgPSB0aGlzLmxhdGl0dWRlO1xuICAgICAgICB0aGlzLm92ZXJsYXlWaWV3LmxvbmdpdHVkZSA9IHRoaXMubG9uZ2l0dWRlO1xuICAgICAgICB0aGlzLm92ZXJsYXlWaWV3LnZpc2libGUgPSBmYWxzZTsgLy9oaWRlIDQweDQwIHRyYW5zcGFyZW50IHBsYWNlaG9sZGVyIHRoYXQgcHJldmVudHMgaG92ZXIgZXZlbnRzXG4gICAgICAgIC8qIGVuZCAqL1xuICAgICAgICBpZiAodGhpcy5ib3VuZHMpIHtcbiAgICAgICAgICAgIHRoaXMub3ZlcmxheVZpZXcuYm91bmRzXyA9IG5ldyBnb29nbGUubWFwcy5MYXRMbmdCb3VuZHMobmV3IGdvb2dsZS5tYXBzLkxhdExuZyh0aGlzLmxhdGl0dWRlICsgdGhpcy5ib3VuZHMueC5sYXRpdHVkZSwgdGhpcy5sb25naXR1ZGUgKyB0aGlzLmJvdW5kcy54LmxvbmdpdHVkZSksIG5ldyBnb29nbGUubWFwcy5MYXRMbmcodGhpcy5sYXRpdHVkZSArIHRoaXMuYm91bmRzLnkubGF0aXR1ZGUsIHRoaXMubG9uZ2l0dWRlICsgdGhpcy5ib3VuZHMueS5sb25naXR1ZGUpKTtcbiAgICAgICAgfVxuICAgICAgICAvLyBqcy1tYXJrZXItY2x1c3RlcmVyIGRvZXMgbm90IHN1cHBvcnQgdXBkYXRpbmcgcG9zaXRpb25zLiBXZSBhcmUgZm9yY2VkIHRvIGRlbGV0ZS9hZGQgYW5kIGNvbXBlbnNhdGUgZm9yIC5yZW1vdmVDaGlsZCBjYWxsc1xuICAgICAgICBjb25zdCBlbG0gPSB0aGlzLnRlbXBsYXRlLm5hdGl2ZUVsZW1lbnQuY2hpbGRyZW5bMF07XG4gICAgICAgIC8vY29uc3QgZWxtID0gIHRoaXMuZWxtR3V0cyB8fCB0aGlzLnRlbXBsYXRlLm5hdGl2ZUVsZW1lbnQuY2hpbGRyZW5bMF1cbiAgICAgICAgLy93ZSBtdXN0IGFsd2F5cyBiZSBzdXJlIHRvIHN0ZWFsIG91ciBzdG9sZW4gZWxlbWVudCBiYWNrIGluY2FzZSB3ZSBhcmUganVzdCBpbiBtaWRkbGUgb2YgY2hhbmdlcyBhbmQgd2lsbCByZWRyYXdcbiAgICAgICAgY29uc3QgcmVzdG9yZSA9IChkaXYpID0+IHtcbiAgICAgICAgICAgIHRoaXMudGVtcGxhdGUubmF0aXZlRWxlbWVudC5hcHBlbmRDaGlsZChkaXYpO1xuICAgICAgICB9O1xuICAgICAgICB0aGlzLm92ZXJsYXlWaWV3LnJlbW92ZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIGlmICghdGhpcy5kaXYpXG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgdGhpcy5kaXYucGFyZW50Tm9kZS5yZW1vdmVDaGlsZCh0aGlzLmRpdik7XG4gICAgICAgICAgICByZXN0b3JlKHRoaXMuZGl2KTtcbiAgICAgICAgICAgIGRlbGV0ZSB0aGlzLmRpdjtcbiAgICAgICAgfTtcbiAgICAgICAgdGhpcy5vdmVybGF5Vmlldy5nZXREaXYgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5kaXY7XG4gICAgICAgIH07XG4gICAgICAgIHRoaXMub3ZlcmxheVZpZXcuZHJhdyA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIGlmICghdGhpcy5kaXYpIHtcbiAgICAgICAgICAgICAgICB0aGlzLmRpdiA9IGVsbTtcbiAgICAgICAgICAgICAgICBjb25zdCBwYW5lcyA9IHRoaXMuZ2V0UGFuZXMoKTtcbiAgICAgICAgICAgICAgICAvLyBpZiBubyBwYW5lcyB0aGVuIGFzc3VtZWQgbm90IG9uIG1hcFxuICAgICAgICAgICAgICAgIGlmICghcGFuZXMgfHwgIXBhbmVzLm92ZXJsYXlJbWFnZSlcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgIHBhbmVzLm92ZXJsYXlJbWFnZS5hcHBlbmRDaGlsZChlbG0pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY29uc3QgbGF0bG5nID0gbmV3IGdvb2dsZS5tYXBzLkxhdExuZyh0aGlzLmxhdGl0dWRlLCB0aGlzLmxvbmdpdHVkZSk7XG4gICAgICAgICAgICBjb25zdCBwcm9qID0gdGhpcy5nZXRQcm9qZWN0aW9uKCk7XG4gICAgICAgICAgICBpZiAoIXByb2opXG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgY29uc3QgcG9pbnQgPSBwcm9qLmZyb21MYXRMbmdUb0RpdlBpeGVsKGxhdGxuZyk7XG4gICAgICAgICAgICBpZiAocG9pbnQpIHtcbiAgICAgICAgICAgICAgICBlbG0uc3R5bGUubGVmdCA9IChwb2ludC54IC0gMTApICsgJ3B4JztcbiAgICAgICAgICAgICAgICBlbG0uc3R5bGUudG9wID0gKHBvaW50LnkgLSAyMCkgKyAncHgnO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHRoaXMuYm91bmRzXykge1xuICAgICAgICAgICAgICAgIC8vIHN0cmV0Y2ggY29udGVudCBiZXR3ZWVuIHR3byBwb2ludHMgbGVmdGJvdHRvbSBhbmQgcmlnaHR0b3AgYW5kIHJlc2l6ZVxuICAgICAgICAgICAgICAgIGNvbnN0IHByb2ogPSB0aGlzLmdldFByb2plY3Rpb24oKTtcbiAgICAgICAgICAgICAgICBjb25zdCBzdyA9IHByb2ouZnJvbUxhdExuZ1RvRGl2UGl4ZWwodGhpcy5ib3VuZHNfLmdldFNvdXRoV2VzdCgpKTtcbiAgICAgICAgICAgICAgICBjb25zdCBuZSA9IHByb2ouZnJvbUxhdExuZ1RvRGl2UGl4ZWwodGhpcy5ib3VuZHNfLmdldE5vcnRoRWFzdCgpKTtcbiAgICAgICAgICAgICAgICB0aGlzLmRpdi5zdHlsZS5sZWZ0ID0gc3cueCArICdweCc7XG4gICAgICAgICAgICAgICAgdGhpcy5kaXYuc3R5bGUudG9wID0gbmUueSArICdweCc7XG4gICAgICAgICAgICAgICAgdGhpcy5kaXYuY2hpbGRyZW5bMF0uc3R5bGUud2lkdGggPSBuZS54IC0gc3cueCArICdweCc7XG4gICAgICAgICAgICAgICAgdGhpcy5kaXYuY2hpbGRyZW5bMF0uc3R5bGUuaGVpZ2h0ID0gc3cueSAtIG5lLnkgKyAncHgnO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICBlbG0uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIGV2ZW50ID0+IHtcbiAgICAgICAgICAgIHRoaXMuaGFuZGxlVGFwKCk7XG4gICAgICAgICAgICBldmVudC5zdG9wUHJvcGFnYXRpb24oKTtcbiAgICAgICAgfSk7XG4gICAgICAgIHRoaXMuaGFuZGxlSW5mb1dpbmRvd1VwZGF0ZSgpO1xuICAgICAgICByZXR1cm4gdGhpcy5vdmVybGF5VmlldztcbiAgICB9XG4gICAgaGFuZGxlVGFwKCkge1xuICAgICAgICBpZiAodGhpcy5vcGVuSW5mb1dpbmRvdykge1xuICAgICAgICAgICAgdGhpcy5pbmZvV2luZG93LmZvckVhY2goaW5mb1dpbmRvdyA9PiB7XG4gICAgICAgICAgICAgICAgaW5mb1dpbmRvdy5vcGVuKCk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLm1hcmtlckNsaWNrLmVtaXQobnVsbCk7XG4gICAgfVxuICAgIF9hZGRFdmVudExpc3RlbmVycygpIHtcbiAgICAgICAgY29uc3QgZW8gPSB0aGlzLl9tYXJrZXJNYW5hZ2VyLmNyZWF0ZUV2ZW50T2JzZXJ2YWJsZSgnY2xpY2snLCB0aGlzLm92ZXJsYXlWaWV3KTtcbiAgICAgICAgY29uc3QgY3MgPSBlby5zdWJzY3JpYmUoKCkgPT4gdGhpcy5oYW5kbGVUYXAoKSk7XG4gICAgICAgIHRoaXMuX29ic2VydmFibGVTdWJzY3JpcHRpb25zLnB1c2goY3MpO1xuICAgIH1cbn07XG5BZ21PdmVybGF5LmN0b3JQYXJhbWV0ZXJzID0gKCkgPT4gW1xuICAgIHsgdHlwZTogR29vZ2xlTWFwc0FQSVdyYXBwZXIgfSxcbiAgICB7IHR5cGU6IE1hcmtlck1hbmFnZXIgLy9yZW5hbWUgdG8gZmlnaHQgdGhlIHByaXZhdGUgZGVjbGFyYXRpb24gb2YgcGFyZW50XG4gICAgIH1cbl07XG5fX2RlY29yYXRlKFtcbiAgICBJbnB1dCgpXG5dLCBBZ21PdmVybGF5LnByb3RvdHlwZSwgXCJsYXRpdHVkZVwiLCB2b2lkIDApO1xuX19kZWNvcmF0ZShbXG4gICAgSW5wdXQoKVxuXSwgQWdtT3ZlcmxheS5wcm90b3R5cGUsIFwibG9uZ2l0dWRlXCIsIHZvaWQgMCk7XG5fX2RlY29yYXRlKFtcbiAgICBJbnB1dCgpXG5dLCBBZ21PdmVybGF5LnByb3RvdHlwZSwgXCJ2aXNpYmxlXCIsIHZvaWQgMCk7XG5fX2RlY29yYXRlKFtcbiAgICBJbnB1dCgpXG5dLCBBZ21PdmVybGF5LnByb3RvdHlwZSwgXCJ6SW5kZXhcIiwgdm9pZCAwKTtcbl9fZGVjb3JhdGUoW1xuICAgIElucHV0KClcbl0sIEFnbU92ZXJsYXkucHJvdG90eXBlLCBcImJvdW5kc1wiLCB2b2lkIDApO1xuX19kZWNvcmF0ZShbXG4gICAgT3V0cHV0KClcbl0sIEFnbU92ZXJsYXkucHJvdG90eXBlLCBcIm1hcmtlckNsaWNrXCIsIHZvaWQgMCk7XG5fX2RlY29yYXRlKFtcbiAgICBJbnB1dCgpXG5dLCBBZ21PdmVybGF5LnByb3RvdHlwZSwgXCJvcGVuSW5mb1dpbmRvd1wiLCB2b2lkIDApO1xuX19kZWNvcmF0ZShbXG4gICAgQ29udGVudENoaWxkcmVuKEFnbUluZm9XaW5kb3cpXG5dLCBBZ21PdmVybGF5LnByb3RvdHlwZSwgXCJpbmZvV2luZG93XCIsIHZvaWQgMCk7XG5fX2RlY29yYXRlKFtcbiAgICBJbnB1dCgnbWFya2VyRHJhZ2dhYmxlJylcbl0sIEFnbU92ZXJsYXkucHJvdG90eXBlLCBcImRyYWdnYWJsZVwiLCB2b2lkIDApO1xuX19kZWNvcmF0ZShbXG4gICAgVmlld0NoaWxkKCdjb250ZW50JywgeyByZWFkOiBFbGVtZW50UmVmIH0pXG5dLCBBZ21PdmVybGF5LnByb3RvdHlwZSwgXCJ0ZW1wbGF0ZVwiLCB2b2lkIDApO1xuQWdtT3ZlcmxheSA9IF9fZGVjb3JhdGUoW1xuICAgIENvbXBvbmVudCh7XG4gICAgICAgIHNlbGVjdG9yOiBcImFnbS1vdmVybGF5XCIsXG4gICAgICAgIHRlbXBsYXRlOiAnPGRpdiAjY29udGVudD48ZGl2IHN0eWxlPVwicG9zaXRpb246YWJzb2x1dGVcIj48bmctY29udGVudD48L25nLWNvbnRlbnQ+PC9kaXY+PC9kaXY+J1xuICAgIH0pXG5dLCBBZ21PdmVybGF5KTtcblxubGV0IEFnbU92ZXJsYXlzID0gY2xhc3MgQWdtT3ZlcmxheXMge1xufTtcbkFnbU92ZXJsYXlzID0gX19kZWNvcmF0ZShbXG4gICAgTmdNb2R1bGUoe1xuICAgICAgICBpbXBvcnRzOiBbXG4gICAgICAgICAgICBDb21tb25Nb2R1bGVcbiAgICAgICAgXSxcbiAgICAgICAgZGVjbGFyYXRpb25zOiBbQWdtT3ZlcmxheV0sXG4gICAgICAgIGV4cG9ydHM6IFtBZ21PdmVybGF5XSxcbiAgICB9KVxuXSwgQWdtT3ZlcmxheXMpO1xuXG4vKipcbiAqIEdlbmVyYXRlZCBidW5kbGUgaW5kZXguIERvIG5vdCBlZGl0LlxuICovXG5cbmV4cG9ydCB7IEFnbU92ZXJsYXksIEFnbU92ZXJsYXlzIH07XG4iXX0="]}